(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages_category_page1-orderModule-index"],{"198d":function(t,e,i){"use strict";i.r(e);var a=i("c21f"),n=i("3fb4");for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("8081");var s,r=i("f0c5"),c=Object(r["a"])(n["default"],a["b"],a["c"],!1,null,"65891a5c",null,!1,a["a"],s);e["default"]=c.exports},"3fb4":function(t,e,i){"use strict";i.r(e);var a=i("5571"),n=i.n(a);for(var o in a)"default"!==o&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e["default"]=n.a},5571:function(t,e,i){"use strict";(function(t){i("99af"),i("ac1f"),i("466d"),i("5319"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i("9ae9"),n=i("ef67"),o=i("d4df"),s={data:function(){return{type:0,page:1,pageSize:20,list:[],scrollLeft:0,tabList:[{name:"全部",number:0},{name:"待付款",number:1},{name:"待发货",number:2},{name:"待收货",number:3},{name:"待评价",number:4},{name:"待成团",number:6}],listTotal:0,loadingType:0,orderState:""}},onLoad:function(t){t.type?(this.type=t.type,this.orderState=t.type,this.getListData()):this.getListData()},onReachBottom:function(){1==this.loadingType?uni.stopPullDownRefresh():(this.page=this.page+1,this.getListData())},onBackPress:function(t){return"navigateBack"!==t.from&&(this.back(),!0)},methods:{againCollage:function(t,e,i){uni.navigateTo({url:"../goodsModule/goodsDetails?productId="+t+"&shopId="+e+"&skuId="+i})},goInviteSpll:function(t,e,i,a){uni.navigateTo({url:"../goodsModule/inviteSpell?collageId="+t+"&orderId="+e+"&type=1&productId="+i+"&skuId="+a})},back:function(){uni.switchTab({url:"../../pages/tabbar/user/index"})},refundDetail:function(t){uni.navigateTo({url:"refundDetails?item="+JSON.stringify(t)})},orderStateChange:function(t){this.type=t,this.orderState=this.tabList[t].number,this.page=1,this.list=[],this.getListData()},getListData:function(){var t=this;0==this.orderState&&(this.orderState=""),uni.showLoading({title:"加载中..."}),a.request(n.FindOrderList,{state:this.orderState,page:this.page,pageSize:this.pageSize},"GET").then((function(e){0==e.data.list.length&&(t.loadingType=1,t.page=t.page),uni.hideLoading(),t.listTotal=e.data.total,t.list=t.list.concat(e.data.list)})).catch((function(t){uni.hideLoading()}))},cancelOrder:function(e,i){var a=this;uni.showModal({title:"温馨提示",content:"您确定要取消该订单吗？",confirmText:"确定取消",cancelText:"点错了",success:function(n){n.confirm?a.doCancel(e,i):n.cancel&&t.log("用户点击取消")}})},doCancel:function(t,e){var i=this;uni.showLoading({title:"提交中..."}),a.request(n.CancelOrder,{orderId:t},"PUT").then((function(t){uni.hideLoading(),uni.showToast({title:"取消成功"}),setTimeout((function(){i.type=0,i.orderState=0,i.page=1,i.list=[],i.getListData()}),1500)})).catch((function(t){uni.hideLoading()}))},goLogisticsTap:function(t,e){uni.navigateTo({url:"logisticsInfo?express="+t+"&deliverFormid="+e})},confirmReceiptTap:function(e){var i=this;uni.showModal({title:"温馨提示",content:"确定您已经收到货物，否则会造成财产损失",confirmText:"确定收到",cancelText:"点错了",success:function(a){a.confirm?i.doConfirm(e):a.cancel&&t.log("用户点击取消")}})},doConfirm:function(t){var e=this;a.request(n.ConfirmReceive,{orderId:t},"PUT").then((function(t){uni.hideLoading(),uni.showToast({title:"确认成功"}),setTimeout((function(){e.type=4,e.orderState=4,e.page=1,e.list=[],e.getListData()}),1500)})).catch((function(t){uni.hideLoading()}))},delOrder:function(e){var i=this;uni.showModal({title:"温馨提示",content:"您确定要删除该订单吗？",confirmText:"确定删除",cancelText:"点错了",success:function(a){a.confirm?i.doDel(e):a.cancel&&t.log("用户点击取消")}})},doDel:function(t){var e=this;uni.showLoading({title:"提交中..."}),a.request(n.DelOrder,{orderId:t},"DELETE").then((function(t){uni.hideLoading(),uni.showToast({title:"删除成功"}),setTimeout((function(){e.type=0,e.orderState=0,e.page=1,e.list=[],e.getListData()}),1500)})).catch((function(t){uni.hideLoading()}))},itemTap:function(t,e){uni.setStorageSync("afterapplyItem",e),uni.navigateTo({url:"orderDetails?orderId="+t})},goShop:function(t){uni.navigateTo({url:"../store/index?storeId="+t})},applyTap:function(t,e){uni.navigateTo({url:"afterSaleApply?item="+JSON.stringify(t)})},payOrder:function(t,e){var i=this;uni.showLoading({title:"订单提交中..."});var o={collageId:t.collageId,money:t.orderPrice,orderId:t.orderId,type:2},s=navigator.userAgent.toLowerCase();"micromessenger"==s.match(/MicroMessenger/i)?this.payRequest(o):a.request(n.gotoH5Pay,o,"POST").then((function(t){location.replace(t.data.mwebUrl)})).catch((function(t){i.submitActive=!0,uni.hideLoading(),uni.showToast({title:"支付失败",icon:"none"})}))},payRequest:function(e){a.request(n.gotoPay,e,"POST").then((function(e){o.config({debug:!1,appId:e.data.appId,timestamp:e.data.timeStamp,nonceStr:e.data.nonceStr,signature:e.data.paySign,jsApiList:["chooseWXPay"]}),o.ready((function(){o.checkJsApi({jsApiList:["chooseWXPay"],success:function(t){},fail:function(t){}}),o.chooseWXPay({timestamp:e.data.timeStamp,nonceStr:e.data.nonceStr,package:e.data.package,signType:e.data.signType,paySign:e.data.paySign,success:function(t){uni.showToast({icon:"none",title:"支付成功"}),uni.navigateTo({url:"index?type=0"})},cancel:function(t){uni.showToast({icon:"none",title:"取消支付"})},fail:function(t){uni.showToast({icon:"none",title:"支付失败"})}})})),o.error((function(e){t.log("error"),t.log(e),uni.hideLoading(),uni.showToast({icon:"none",title:"支付失败了",duration:3e3})}))})).catch((function(t){uni.hideLoading()}))},evaluateTap:function(t,e){uni.setStorageSync("evaluateItem",t),uni.setStorageSync("orderId",e),uni.navigateTo({url:"../goodsModule/evaluate"})},evaluateTowTap:function(e,i){t.log(i,444),uni.setStorageSync("addCommentVOList",this.list[e]),uni.navigateTo({url:"../goodsModule/addEvaluate?type=1&commentId="+i})}}};e.default=s}).call(this,i("5a52")["default"])},8081:function(t,e,i){"use strict";var a=i("e5c1"),n=i.n(a);n.a},c21f:function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return a}));var a={uTabs:i("eb28").default},n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"container"},[a("v-uni-view",{staticStyle:{"padding-bottom":"68upx"}},[a("v-uni-view",[a("u-tabs",{attrs:{list:t.tabList,"is-scroll":!1,"bg-color":"#F7F7F7","active-color":"#FF7800",current:t.type},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.orderStateChange.apply(void 0,arguments)}}})],1),a("v-uni-view",{staticClass:"order-list-box"},[t.listTotal>0?a("v-uni-view",t._l(t.list,(function(e,i){return a("v-uni-view",{key:i,staticClass:"item",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.itemTap(e.orderId,e)}}},[a("v-uni-view",{staticClass:"order-list-top"},[a("v-uni-view",{staticClass:"top-l",on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.goShop(e.shopId)}}},[a("v-uni-image",{staticClass:"shop-img",attrs:{src:e.shopLogo}}),a("v-uni-text",{staticClass:"shop-name"},[t._v(t._s(e.shopName))]),a("v-uni-image",{staticClass:"arrow-img",attrs:{src:"/images/arrow-right.png"}})],1),1==e.state?a("v-uni-view",{staticClass:"order-status"},[t._v("待付款")]):2==e.state?a("v-uni-view",{staticClass:"order-status"},[t._v("待发货")]):3==e.state?a("v-uni-view",{staticClass:"order-status"},[t._v("待收货")]):4==e.state?a("v-uni-view",{staticClass:"order-status"},[t._v("已完成")]):5==e.state?a("v-uni-view",{staticClass:"order-status"},[t._v("交易关闭")]):6==e.state?a("v-uni-view",{staticClass:"order-status"},[t._v("待成团")]):1==e.returnType?a("v-uni-view",{staticClass:"order-status"},[t._v("退款中")]):t._e()],1),a("v-uni-view",{staticClass:"order-info-box"},[a("v-uni-view",{staticClass:"order-info"},[t._l(e.skus,(function(n,o){return a("v-uni-view",{key:o,staticClass:"order-info-item"},[a("v-uni-image",{staticClass:"product-img",attrs:{src:n.image}}),a("v-uni-view",{staticClass:"info-box"},[a("v-uni-text",{staticClass:"product-name"},[t._v(t._s(n.productName))]),a("v-uni-view",{staticClass:"product-sku"},[t._v(t._s(n.value))]),a("v-uni-view",{staticClass:"price-sku-box"},[a("v-uni-view",{staticClass:"box-h"},[a("v-uni-text",{staticClass:"product-price"},[a("v-uni-text",{staticClass:"fuhao"},[t._v("￥")]),t._v(t._s(n.price))],1),a("v-uni-text",{staticClass:"product-num"},[t._v("x "+t._s(n.number))])],1),0==n.commentId&&4==e.state?a("v-uni-view",{staticClass:"evaluate",on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.evaluateTap(n,e.orderId)}}},[t._v("立即评价")]):t._e(),0!=n.commentId&&4==e.state?a("v-uni-view",{staticClass:"evaluate2",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.evaluateTowTap(i,n.commentId)}}},[t._v("追加评价")]):t._e()],1)],1)],1)})),a("v-uni-view",{staticClass:"total-price-box"},[t._v("总价¥"+t._s(e.orderPrice)+",优惠¥"+t._s(e.discountPrice)),e.price>0?[t._v("，实付¥"+t._s(e.price))]:t._e()],2)],2),a("v-uni-view",{staticClass:"order-btn-box"},[1==e.state||6==e.state?a("v-uni-text",{staticClass:"btn l",on:{click:function(a){a.stopPropagation(),arguments[0]=a=t.$handleEvent(a),t.cancelOrder(e.orderId,i)}}},[t._v("取消订单")]):t._e(),1==e.state?a("v-uni-text",{staticClass:"btn r",on:{click:function(a){a.stopPropagation(),arguments[0]=a=t.$handleEvent(a),t.payOrder(e,i)}}},[t._v("立即付款")]):t._e(),3!=e.state&&4!=e.state||0!=e.afterState&&6!=e.afterState?t._e():a("v-uni-text",{staticClass:"btn l",on:{click:function(a){a.stopPropagation(),arguments[0]=a=t.$handleEvent(a),t.applyTap(e,i)}}},[t._v("申请售后")]),3==e.state||4==e.state?a("v-uni-text",{staticClass:"btn l",on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.goLogisticsTap(e.express,e.deliverFormid)}}},[t._v("查看物流")]):t._e(),3==e.state?a("v-uni-text",{staticClass:"btn r",on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.confirmReceiptTap(e.orderId)}}},[t._v("确认收货")]):t._e(),5==e.state||9==e.state?a("v-uni-text",{staticClass:"btn l",on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.delOrder(e.orderId)}}},[t._v("删除订单")]):t._e(),1==e.returnType?a("v-uni-text",{staticClass:"btn l",on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.refundDetail(e)}}},[t._v("退款详情")]):t._e(),6==e.state?a("v-uni-text",{staticClass:"btn r",on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.goInviteSpll(e.collageId,e.orderId,e.skus[0].productId,e.skus[0].skuId,e.shopId)}}},[t._v("邀请拼单")]):t._e(),5==e.state?a("v-uni-text",{staticClass:"btn r",on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.againCollage(e.skus[0].productId,e.shopId,e.skus[0].skuId)}}},[t._v(t._s(0!=e.collageId?"再次开团":"再次购买"))]):t._e()],1)],1)],1)})),1):a("v-uni-view",{staticClass:"emptyOrder-box flex-items-plus flex-column"},[a("v-uni-image",{staticClass:"emptyOrder-img",attrs:{src:i("d92b")}}),a("v-uni-label",{staticClass:"font-color-999 fs26 mar-top-30"},[t._v("你还没有订单哦～")])],1)],1)],1)],1)},o=[]},d5cd:function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 页面左右间距 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/*文字颜色*/\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */uni-page-body[data-v-65891a5c]{width:100%;height:100%;background:#f6f6f6}.nav-box-box[data-v-65891a5c]{height:%?88?%;background:#f6f6f6;white-space:nowrap;position:fixed;top:0;left:0;width:100%;z-index:10}.nav-box-box .item[data-v-65891a5c]{display:inline-view;padding:0 %?30?%;box-sizing:border-box;height:%?88?%;text-align:center;line-height:%?88?%;font-size:%?30?%;color:#666;font-weight:500}.nav-box-box .item.active uni-text[data-v-65891a5c]{display:inline-view;color:#ff7911;box-sizing:border-box;height:%?88?%;border-bottom:2px solid #ff7911}.order-list-box[data-v-65891a5c]{padding:%?20?% %?30?% 0;box-sizing:border-box}.order-list-box .item[data-v-65891a5c]{margin-bottom:%?20?%;background:#fff;border-radius:%?10?%}.order-list-top[data-v-65891a5c]{height:%?96?%;padding:0 %?30?%;box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;border-bottom:1px solid #eee}.top-l[data-v-65891a5c]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.shop-img[data-v-65891a5c]{width:%?36?%;height:%?36?%;margin-right:%?10?%}.shop-name[data-v-65891a5c]{font-size:%?30?%;color:#333;font-weight:700}.arrow-img[data-v-65891a5c]{margin-left:%?15?%;width:%?24?%;height:%?24?%}.order-status[data-v-65891a5c]{font-size:%?28?%;color:#ff7911;font-weight:500}.order-info-box[data-v-65891a5c]{padding:0 %?30?%;box-sizing:border-box}.order-info[data-v-65891a5c]{border-bottom:1px solid #eee}.order-info-item[data-v-65891a5c]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;padding:%?20?% 0}.product-img[data-v-65891a5c]{width:%?180?%;height:%?180?%;border-radius:%?10?%;margin-right:%?30?%}.info-box[data-v-65891a5c]{-webkit-box-flex:1;-webkit-flex:1;flex:1;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.product-name[data-v-65891a5c]{font-size:%?26?%;color:#333;height:%?68?%;line-height:%?34?%;display:-webkit-box;overflow:hidden;text-overflow:ellipsis;word-break:break-all;-webkit-box-orient:vertical;-webkit-line-clamp:2}.price-sku-box[data-v-65891a5c]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.product-sku[data-v-65891a5c]{font-size:%?24?%;color:#999}.product-price[data-v-65891a5c]{font-size:%?28?%;color:#333;font-weight:400}.product-price .fuhao[data-v-65891a5c]{font-size:%?28?%}.product-num[data-v-65891a5c]{display:inline-view;font-size:%?28?%;margin-left:%?20?%;color:#999}.total-price-box[data-v-65891a5c]{font-size:%?26?%;color:#333;text-align:right;padding:%?30?% 0}.order-btn-box[data-v-65891a5c]{padding:%?20?% 0;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end}.order-btn-box .btn[data-v-65891a5c]{display:inline-view;width:%?150?%;height:%?56?%;border-radius:%?28?%;text-align:center;line-height:%?56?%;font-size:%?26?%;color:#333;margin-left:%?20?%}.evaluate[data-v-65891a5c]{height:%?56?%;border-radius:%?28?%;text-align:center;line-height:%?56?%;font-size:%?26?%;padding:0 %?30?%;border:1px solid #ff7911;color:#ff7911}.evaluate2[data-v-65891a5c]{height:%?56?%;border-radius:%?28?%;text-align:center;line-height:%?56?%;font-size:%?26?%;padding:0 %?30?%;border:1px solid #bbb;color:#333}.order-btn-box .btn.l[data-v-65891a5c]{border:1px solid #bbb;color:#333}.order-btn-box .btn.r[data-v-65891a5c]{border:1px solid #ff7911;color:#ff7911}.emptyOrder-box[data-v-65891a5c]{margin-top:%?70?%}.emptyOrder-box .emptyOrder-img[data-v-65891a5c]{width:%?270?%;height:%?270?%}body.?%PAGE?%[data-v-65891a5c]{background:#f6f6f6}',""]),t.exports=e},d92b:function(t,e,i){t.exports=i.p+"static/img/emptyOrder-img.b1d45832.png"},e5c1:function(t,e,i){var a=i("d5cd");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("48ed1d5c",a,!0,{sourceMap:!1,shadowMode:!1})}}]);